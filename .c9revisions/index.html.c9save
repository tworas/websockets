{"ts":1352822492457,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1352822496466,"patch":[[{"diffs":[[1,"<html>\r\n<head>\r\n<title>Cloud9, NodeJS & Heroku: websockets for all</title>\r\n\r\n<script src=\"/socket.io/socket.io.js\"></script>\r\n\r\n<script>\r\nonerror = function (msg) {\r\nlog(msg);\r\n}\r\nfunction log(msg) {\r\ndocument.getElementById('log').appendChild(document.createTextNode(new Date() + ' ' + msg + '\\n'));\r\n}\r\nfunction status(msg) {\r\nlog(msg);\r\ndocument.getElementById('status').textContent = msg;\r\n}\r\nfunction clearLog() {\r\nvar e = document.getElementById('log');\r\nwhile (e.hasChildNodes()) {\r\ne.removeChild(e.firstChild);\r\n}\r\ne.appendChild(document.createTextNode('Log: \\n'));\r\n}\r\n</script>\r\n\r\n<script>\r\nvar socket = null;\r\nfunction connect() {\r\nlog('Connecting to local server...');\r\nif (socket == null) {\r\nsocket = io.connect(null,{'auto connect': false});\r\nsocket.on('connect', function () {\r\nstatus('Connected');\r\n});\r\n\r\nsocket.on('message', function (data) {\r\nlog(data);\r\n});\r\n}\r\nsocket.socket.connect();\r\n}\r\n\r\nfunction send() {\r\nif (socket && socket.socket.connected) {\r\nsocket.send(document.getElementById('text').value);\r\nlog('>' + document.getElementById('text').value);\r\n} else {\r\nlog('Not connected.');\r\n}\r\n}\r\n\r\nfunction send100() {\r\nif (socket && socket.socket.connected) {\r\nfor (var i = 0; i < 100; i += 1) {\r\nsocket.send('test'+ i);\r\nlog('> test' + i);\r\n}\r\n} else {\r\nlog('Not connected.');\r\n}\r\n}\r\n\r\nfunction update() {\r\nif (socket && socket.socket && socket.socket.transport) {\r\ndocument.getElementById('sessionId').textContent = socket.socket.transport.sessid;\r\ndocument.getElementById('transport').textContent = socket.socket.transport.name;\r\n} else {\r\ndocument.getElementById('sessionId').textContent = '-';\r\ndocument.getElementById('transport').textContent = '-';\r\n}\r\n}\r\nsetInterval(update, 10);\r\n\r\n</script>\r\n</head>\r\n\r\n<body onload=\"connect()\">\r\n<p>\r\n<label style='width:200px;float:left'>Status: <span id=\"status\">Idle</span></label>\r\n</p>\r\n<p>SessionId: <span id=\"sessionId\">-</span></p>\r\n<p>Transport: <span id=\"transport\">-</span></p>\r\n\r\n<p>\r\n<label>Message: <input id=\"text\" type=\"text\" size=\"80\" value=\"\"/></label>\r\n<input type=button value=\"Echo\" onclick=\"send()\">\r\n</p>\r\n\r\n<p>\r\n<input type=button value=\"Spam 100 packets\" onclick=\"send100()\" />\r\n<input type=button value=\"Clear log\" onclick=\"clearLog()\" />\r\n</p>\r\n\r\n<pre id=\"log\">Log:</pre>\r\n</body>\r\n</html>"]],"start1":0,"start2":0,"length1":0,"length2":2284}]],"length":2284,"saved":false}
{"contributors":[],"silentsave":false,"ts":1352833873664,"patch":[[{"diffs":[[0,"cript>\r\n"],[1,"    "],[0,"onerror "]],"start1":131,"start2":131,"length1":16,"length2":20},{"diffs":[[0,"nction (msg) {\r\n"],[1,"        "],[0,"log(msg);\r\n}\r\nfu"]],"start1":155,"start2":155,"length1":32,"length2":40},{"diffs":[[0," log(msg);\r\n"],[-1,"}\r\n"],[1,"    }\r\n    \r\n    "],[0,"function log"]],"start1":178,"start2":178,"length1":27,"length2":41},{"diffs":[[0,"log(msg) {\r\n"],[1,"        "],[0,"document.get"]],"start1":216,"start2":216,"length1":24,"length2":32},{"diffs":[[0,"\\n'));\r\n"],[-1,"}\r\n"],[1,"    }\r\n    \r\n    "],[0,"function"]],"start1":329,"start2":329,"length1":19,"length2":33},{"diffs":[[0,"tus(msg) {\r\n"],[1,"        "],[0,"log(msg);\r\nd"]],"start1":366,"start2":366,"length1":24,"length2":32},{"diffs":[[0,"(msg);\r\n"],[1,"        "],[0,"document"]],"start1":389,"start2":389,"length1":16,"length2":24},{"diffs":[[0,"= msg;\r\n"],[-1,"}\r\n"],[1,"    }\r\n    \r\n    "],[0,"function"]],"start1":451,"start2":451,"length1":19,"length2":33},{"diffs":[[0,"og() {\r\n"],[1,"        "],[0,"var e = "]],"start1":491,"start2":491,"length1":16,"length2":24},{"diffs":[[0,"log');\r\n"],[1,"        "],[0,"while (e"]],"start1":540,"start2":540,"length1":16,"length2":24},{"diffs":[[0,"s()) {\r\n"],[1,"            "],[0,"e.remove"]],"start1":577,"start2":577,"length1":16,"length2":28},{"diffs":[[0,"hild);\r\n"],[-1,"}\r\n"],[1,"        }\r\n        "],[0,"e.append"]],"start1":619,"start2":619,"length1":19,"length2":35},{"diffs":[[0,"\\n'));\r\n"],[1,"    "],[0,"}\r\n</scr"]],"start1":690,"start2":690,"length1":16,"length2":20},{"diffs":[[0,"cript>\r\n"],[1,"    "],[0,"var sock"]],"start1":720,"start2":720,"length1":16,"length2":20},{"diffs":[[0," null;\r\n"],[1,"    \r\n    "],[0,"function"]],"start1":744,"start2":744,"length1":16,"length2":26},{"diffs":[[0,"onnect() {\r\n"],[1,"        "],[0,"log('Connect"]],"start1":772,"start2":772,"length1":24,"length2":32},{"diffs":[[0,"...');\r\n"],[1,"        \r\n        "],[0,"if (sock"]],"start1":823,"start2":823,"length1":16,"length2":34},{"diffs":[[0,"== null) {\r\n"],[1,"            "],[0,"socket = io."]],"start1":860,"start2":860,"length1":24,"length2":36},{"diffs":[[0,"lse});\r\n"],[1,"            "],[0,"socket.o"]],"start1":928,"start2":928,"length1":16,"length2":28},{"diffs":[[0,"n () {\r\n"],[1,"            "],[0,"status('"]],"start1":976,"start2":976,"length1":16,"length2":28},{"diffs":[[0,");\r\n"],[-1,"});\r\n\r\n"],[1,"        });\r\n\r\n        "],[0,"sock"]],"start1":1014,"start2":1014,"length1":15,"length2":31},{"diffs":[[0," {\r\n"],[-1,"log(data);\r\n});\r\n}\r\n"],[1,"            log(data);\r\n        });\r\n    }\r\n    "],[0,"sock"]],"start1":1077,"start2":1077,"length1":28,"length2":56},{"diffs":[[0,"ect();\r\n"],[1,"    "],[0,"}\r\n\r\n"],[1,"    "],[0,"function"]],"start1":1147,"start2":1147,"length1":21,"length2":29},{"diffs":[[0,"n send() {\r\n"],[1,"        "],[0,"if (socket &"]],"start1":1175,"start2":1175,"length1":24,"length2":32},{"diffs":[[0,"nnected) {\r\n"],[1,"            "],[0,"socket.send("]],"start1":1225,"start2":1225,"length1":24,"length2":36},{"diffs":[[0,"').value);\r\n"],[1,"            "],[0,"log('>' + do"]],"start1":1290,"start2":1290,"length1":24,"length2":36},{"diffs":[[0,"alue);\r\n"],[1,"        "],[0,"} else {"]],"start1":1357,"start2":1357,"length1":16,"length2":24},{"diffs":[[0,"      } else {\r\n"],[1,"            "],[0,"log('Not connect"]],"start1":1367,"start2":1367,"length1":32,"length2":44},{"diffs":[[0,"nected.');\r\n"],[-1,"}\r\n"],[1,"        }\r\n    "],[0,"}\r\n\r\n"],[1,"    "],[0,"function sen"]],"start1":1407,"start2":1407,"length1":32,"length2":48},{"diffs":[[0,"end100() {\r\n"],[1,"        "],[0,"if (socket &"]],"start1":1453,"start2":1453,"length1":24,"length2":32},{"diffs":[[0,"ted) {\r\n"],[1,"            "],[0,"for (var"]],"start1":1507,"start2":1507,"length1":16,"length2":28},{"diffs":[[0,"= 1) {\r\n"],[1,"                "],[0,"socket.s"]],"start1":1555,"start2":1555,"length1":16,"length2":32},{"diffs":[[0,"'+ i);\r\n"],[1,"                "],[0,"log('> t"]],"start1":1596,"start2":1596,"length1":16,"length2":32},{"diffs":[[0,");\r\n"],[-1,"}\r\n} else {\r\n"],[1,"            }\r\n        } else {\r\n            "],[0,"log("]],"start1":1636,"start2":1636,"length1":21,"length2":53},{"diffs":[[0,"ed.');\r\n"],[-1,"}\r\n"],[1,"        }\r\n    "],[0,"}\r\n\r\nfun"]],"start1":1701,"start2":1701,"length1":19,"length2":31}]],"length":2702,"saved":false}
{"ts":1352836518050,"patch":[[{"diffs":[[0,"cript>\r\n"],[-1,"    "],[0,"onerror "]],"start1":131,"start2":131,"length1":20,"length2":16},{"diffs":[[0,"on (msg) {\r\n"],[-1,"        "],[0,"log(msg);\r\n "]],"start1":155,"start2":155,"length1":32,"length2":24},{"diffs":[[0,"(msg);\r\n"],[-1,"    }\r\n    \r\n    "],[1,"}\r\n"],[0,"function"]],"start1":170,"start2":170,"length1":33,"length2":19},{"diffs":[[0,"msg) {\r\n"],[-1,"        "],[0,"document"]],"start1":194,"start2":194,"length1":24,"length2":16},{"diffs":[[0,"\\n'));\r\n"],[-1,"    }\r\n    \r\n    "],[1,"}\r\n"],[0,"function"]],"start1":295,"start2":295,"length1":33,"length2":19},{"diffs":[[0,"tus(msg) {\r\n"],[-1,"        "],[0,"log(msg);\r\n "]],"start1":318,"start2":318,"length1":32,"length2":24},{"diffs":[[0,"(msg);\r\n"],[-1,"        "],[0,"document"]],"start1":333,"start2":333,"length1":24,"length2":16},{"diffs":[[0,"g;\r\n"],[-1,"    }\r\n    \r\n    "],[1,"}\r\n"],[0,"func"]],"start1":391,"start2":391,"length1":25,"length2":11},{"diffs":[[0,"og() {\r\n"],[-1,"        "],[0,"var e = "]],"start1":413,"start2":413,"length1":24,"length2":16},{"diffs":[[0,"log');\r\n"],[-1,"        "],[0,"while (e"]],"start1":454,"start2":454,"length1":24,"length2":16},{"diffs":[[0,"s()) {\r\n"],[-1,"            "],[0,"e.remove"]],"start1":483,"start2":483,"length1":28,"length2":16},{"diffs":[[0,"hild);\r\n"],[-1,"        }\r\n        "],[1,"}\r\n"],[0,"e.append"]],"start1":513,"start2":513,"length1":35,"length2":19},{"diffs":[[0,"\\n'));\r\n"],[-1,"    "],[0,"}\r\n</scr"]],"start1":568,"start2":568,"length1":20,"length2":16},{"diffs":[[0,"cript>\r\n"],[-1,"    "],[0,"var sock"]],"start1":594,"start2":594,"length1":20,"length2":16},{"diffs":[[0," null;\r\n"],[-1,"    \r\n    "],[0,"function"]],"start1":614,"start2":614,"length1":26,"length2":16},{"diffs":[[0,"ct() {\r\n"],[-1,"        "],[0,"log('Con"]],"start1":636,"start2":636,"length1":24,"length2":16},{"diffs":[[0,");\r\n"],[-1,"        \r\n        "],[0,"if ("]],"start1":679,"start2":679,"length1":26,"length2":8},{"diffs":[[0,"== null) {\r\n"],[-1,"            "],[0,"socket = io."]],"start1":694,"start2":694,"length1":36,"length2":24},{"diffs":[[0,"lse});\r\n"],[-1,"            "],[0,"socket.o"]],"start1":750,"start2":750,"length1":28,"length2":16},{"diffs":[[0,"n () {\r\n"],[-1,"            "],[0,"status('"]],"start1":786,"start2":786,"length1":28,"length2":16},{"diffs":[[0,");\r\n"],[-1,"        });\r\n\r\n        "],[1,"});\r\n\r\n"],[0,"sock"]],"start1":812,"start2":812,"length1":31,"length2":15},{"diffs":[[0," {\r\n"],[-1,"            log(data);\r\n        });\r\n    }\r\n    "],[1,"log(data);\r\n});\r\n}\r\n"],[0,"sock"]],"start1":859,"start2":859,"length1":56,"length2":28},{"diffs":[[0,"ect();\r\n"],[-1,"    "],[0,"}\r\n\r\n"],[-1,"    "],[0,"function"]],"start1":901,"start2":901,"length1":29,"length2":21},{"diffs":[[0,"n send() {\r\n"],[-1,"        "],[0,"if (socket &"]],"start1":921,"start2":921,"length1":32,"length2":24},{"diffs":[[0,"ted) {\r\n"],[-1,"            "],[0,"socket.s"]],"start1":967,"start2":967,"length1":28,"length2":16},{"diffs":[[0,"alue);\r\n"],[-1,"            "],[0,"log('>' "]],"start1":1020,"start2":1020,"length1":28,"length2":16},{"diffs":[[0,"alue);\r\n"],[-1,"        "],[0,"} else {"]],"start1":1071,"start2":1071,"length1":24,"length2":16},{"diffs":[[0,"\r\n} else {\r\n"],[-1,"            "],[0,"log('Not con"]],"start1":1077,"start2":1077,"length1":36,"length2":24},{"diffs":[[0,");\r\n"],[-1,"        }\r\n    "],[1,"}\r\n"],[0,"}\r\n\r\n"],[-1,"    "],[0,"func"]],"start1":1109,"start2":1109,"length1":32,"length2":16},{"diffs":[[0,"00() {\r\n"],[-1,"        "],[0,"if (sock"]],"start1":1135,"start2":1135,"length1":24,"length2":16},{"diffs":[[0,"ted) {\r\n"],[-1,"            "],[0,"for (var"]],"start1":1177,"start2":1177,"length1":28,"length2":16},{"diffs":[[0,"= 1) {\r\n"],[-1,"                "],[0,"socket.s"]],"start1":1213,"start2":1213,"length1":32,"length2":16},{"diffs":[[0,");\r\n"],[-1,"                "],[0,"log("]],"start1":1242,"start2":1242,"length1":24,"length2":8},{"diffs":[[0,");\r\n"],[-1,"            }\r\n        } else {\r\n            "],[1,"}\r\n} else {\r\n"],[0,"log("]],"start1":1262,"start2":1262,"length1":53,"length2":21},{"diffs":[[0,");\r\n"],[-1,"        }\r\n    "],[1,"}\r\n"],[0,"}\r\n\r"]],"start1":1299,"start2":1299,"length1":23,"length2":11}]],"length":2284,"saved":false}
